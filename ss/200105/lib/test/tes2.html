<head>
<script type="text/javascript" src="../inherits.js"></script>
<script type="text/javascript" src="../vector.js"></script>
<script type="text/javascript" src="../geono.js"></script>
<script type="text/javascript" src="../util.js"></script>
<script type="text/javascript" src="../onophy.js"></script>
</head>
<body onload="onl();" style="height:100%;overflow-y: hidden;">
	<div id="hoge"></div>
	<canvas id="c" width=512 height=512 ></canvas>
	<script>
"use strict"

	var onl=function(){
 var ctx = document.getElementById("c").getContext("2d");

var p1=[[10,10,0],[100,100,0]];
var p2=[[50,50,0],[100,100,0]];
var td=new Vec3();
var trns=function(v,v2){
	v[0]=v2[0]+256;
	v[1]=v2[1]+256;
}
	window.onmousemove =function(e){

ctx.clearRect(0,0,512,512);
ctx.strokeStyle="red";
ctx.beginPath();
ctx.moveTo(0,256);
ctx.lineTo(512,256);
ctx.stroke();
ctx.strokeStyle="green";
ctx.beginPath();
ctx.moveTo(256,0);
ctx.lineTo(256,512);
ctx.stroke();

ctx.strokeStyle="black";

p2[0][0]=e.pageX-256;
p2[0][1]=e.pageY-256;
p2[0][2]=40;

p2[1][0]=p2[0][0]+0;
p2[1][1]=p2[0][1]+50;
p2[1][2]=p2[0][2];

ctx.beginPath();
for(var i=0;i<2;i++){
 trns(td,p1[i]);
  if(i==0){
  ctx.moveTo(td[0],td[1]);
  }else{
  ctx.lineTo(td[0],td[1]);
  }
}
ctx.closePath();

ctx.stroke();

ctx.beginPath();
for(var i=0;i<2;i++){
 trns(td,p2[i]);
  if(i==0){
  ctx.moveTo(td[0],td[1]);
  }else{
  ctx.lineTo(td[0],td[1]);
  }
}

ctx.closePath();

ctx.stroke();
var ans1=new Vec3();
var ans2=new Vec3();
var a =Geono.LINE_LINE(ans1,ans2,p1[0],p1[1],p2[0],p2[1]);
//var HOGE=new Vec3();
//HOGE[0]=e.pageX-256;
//HOGE[1]=e.pageY-256;
//HOGE[2]=100;
//var ps=[];
//for(var i=0;i<3;i++){
//	ps.push(new Vec3());
//	Vec3.add(ps[i],triangle2.v[i],triangle2.location);
//}
//OnoPhy.conTRIANGLE_TRIANGLE(ans1,ans2,triangle.v[0],triangle.v[1],triangle.v[2],ps[0],ps[1],ps[2]);


trns(td,ans1);
ctx.fillStyle="red";
ctx.fillRect(td[0]-2,td[1]-2,5,5);
trns(td,ans2);
ctx.fillStyle="black";
ctx.fillRect(td[0]-1,td[1]-1,3,3);
}
	}
    </script>
